apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ template "fullname" . }}
  labels:
    app: {{ template "name" . }}
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    component: "{{ .Values.name }}"
    release: "{{ .Release.Name }}"
    heritage: "{{ .Release.Service }}"
data:
  config.json: |
    {
        "app": {
            "riddlerUrl": "{{ .Values.endpoints.riddlerUrl }}",
            "gitUrl": "{{ .Values.endpoints.gitUrl }}",
            "cobaltUrl": "{{ .Values.endpoints.cobaltUrl }}",
            "historianUrl": "{{ .Values.endpoints.historianUrl }}",
            "alfredUrl": "{{ .Values.endpoints.alfredUrl }}",
            "jarvisUrl": "{{ .Values.endpoints.jarvisUrl }}"
        },
        "login": {
            "microsoft": {
                "clientId": "3d642166-9884-4463-8248-78961b8c1300",
                "secret": "IefegJIsumWtD1Of/9AIUWvm6ryR624vgMtKRmcNEsQ="
            }
        },
        "logger": {
            "colorize": true,
            "morganFormat": "dev",
            "json": false,
            "level": "info",
            "timestamp": true,
            "label": "winston"
        },
        "mongo": {
            "endpoint": "{{ .Values.endpoints.mongodb }}",
            "collectionNames": {
                "tenants": "tenantCollection",
                "users": "userCollection",
                "orgs": "orgCollection"
            }
        },
        "kafka": {
            "lib": {
                "name": "kafka-node",
                "endpoint": "{{ .Values.endpoints.kafka }}"
            }
        },
        "system": {
            "topics": {
                "send": "deltas"
            }
        },
        "error": {
            "track": true,
            "endpoint" : "https://25f5c231660f474fb85fb4daeb070029:3301d25c7ed9434688e4f5bd998b9739@sentry.wu2.prague.office-int.com/2"
        },
        "redis": {
            "host": "{{ .Values.endpoints.redis }}",
            "port": 6379
        },
        "loader": {
            "orderer": "https://alfred.wu2-ppe.prague.office-int.com",
            "storage": "https://historian.wu2-ppe.prague.office-int.com",
            "tenant": "pensive-newton",
            "secret": "2fd6c969f329006b6acd031abaf1c5ce",
            "jwtKey": "VBQyoGpEYrTn3XQPtXW3K8fFDd",
            "documentId": "key-value-manager-0005",
            "package": "@chaincode/key-value@0.3.6797"
        }
    }